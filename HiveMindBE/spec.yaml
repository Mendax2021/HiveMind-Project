openapi: "3.0.0"
info:
  version: "1.0.0"
  title: HiveMind API
  description: >
    `HiveMind` è un social network progettato per favorire la condivisione di idee e opinioni. 
    Gli utenti possono registrarsi e autenticarsi per pubblicare nuove idee e possono visualizzare 
    e valutare le idee di altri utenti con upvote esprimendo il loro accordo o disaccordo.

tags:
  - name: Auth
    description: Autenticazione e registrazione dell`utente
  - name: Idea
    description: Gestione delle idee
  - name: Vote
    description: Gestione dei voti
  - name: Comment
    description: Gestione dei commenti

paths:
  # Doc. dei path /auth
  /auth/signin:
    post:
      tags:
        - Auth
      summary: Autenticazione dell`utente
      description: Autenticazione dell`utente
      requestBody:
        description: Credenziali dell`utente da autenticare
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - usr
                - pwd
              properties:
                usr:
                  type: string
                  example: Hackerino
                pwd:
                  type: string
                  example: T0P0L1No0
      responses:
        200:
          description: Utente autenticato
        401:
          description: Credenziali invalide

  /auth/signup:
    post:
      tags:
        - Auth
      summary: Registrazione dell`utente
      description: Registrazione dell`utente
      requestBody:
        description: Credenziali dell`utente da registrare
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - usr
                - pwd
              properties:
                usr:
                  type: string
                  example: Hackerino
                pwd:
                  type: string
                  example: T0P0L1No0
      responses:
        200:
          description: Utente registrato
        409:
          description: Username già in uso

  # Doc. dei path /Idea
  /ideas:
    get:
      tags:
        - Idea
      summary: Recupero di tutte le idee di un utente
      parameters:
        - name: userId
          in: query
          description: Id dell`utente di cui recuperare le idee
          required: true
          schema:
            type: integer
      description: >
        Recupero di tutte le idee presenti nel sistemadi un dato utente il cui Id è passato
        nei params.
        Quando un utente tenta di recuperare le idee di un altro utente, il sistema
        rigetta la richiesta.
      responses:
        200:
          description: idee recuperate
        401:
          description: Utente non autorizzato
        403:
          description: Utente non autorizzato a visualizzare le idee di un altro utente

    post:
      tags:
        - Idea
      summary: Creazione di una nuova idea
      description: Creazione di una nuova idea
      requestBody:
        description: Titolo e descrizione dell`idea da creare
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - title
                - description
              properties:
                title:
                  type: string
                  example: Titolo dell`idea
                description:
                  type: string
                  example: Descrizione dell`idea
      responses:
        200:
          description: Idea creata
        401:
          description: Idea non creata

  /ideas/search:
    get:
      tags:
        - Idea
      summary: Recupero delle idee presenti nel sistema a seconda della tipologia
      parameters:
        - name: type
          in: query
          description: Tipologia di idee da prelevare, che sia mainstream, unpopular o  controversial
          required: true
          schema:
            type: string
        - name: userId
          in: query
          description: Id dell`utente di cui recuperare le idee
          required: false
          schema:
            type: integer
      description: >
        Recupero delle idee presenti nel sistema a seconda della tipologia
      responses:
        200:
          description: idee recuperate
        401:
          description: Utente non autorizzato

  /ideas/{ideaId}:
    get:
      tags:
        - Idea
      summary: Recupero di una singola idea
      parameters:
        - name: ideaId
          in: path
          description: Id dell`idea da recuperare
          required: true
          schema:
            type: string
      description: Recupero di una singola idea
      responses:
        200:
          description: Idea recuperata
        401:
          description: Idea non recuperata

    put:
      tags:
        - Idea
      summary: Modifica di una propria idea
      parameters:
        - name: ideaId
          in: path
          description: Id dell`idea da modificare
          required: true
          schema:
            type: string
      description: Modifica di un` idea
      requestBody:
        description: Titolo e descrizione dell`idea da modificare
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - title
                - description
              properties:
                title:
                  type: string
                  example: Titolo dell`idea
                description:
                  type: string
                  example: Descrizione dell`idea
      responses:
        200:
          description: Idea modificata
        401:
          description: Idea non modificata

    delete:
      tags:
        - Idea
      summary: Eliminazione di una singola idea
      parameters:
        - name: ideaId
          in: path
          description: Id dell`idea da eliminare
          required: true
          schema:
            type: string
      description: Eliminazione di una singola idea
      responses:
        200:
          description: Idea eliminata
        401:
          description: Idea non eliminata

  # Doc. dei path /votes
  /ideas/{ideaId}/votes:
    get:
      tags:
        - Vote
      summary: Recupero di tutti i voti di un`idea
      parameters:
        - name: ideaId
          in: path
          description: Id dell`idea di cui recuperare i voti
          required: true
          schema:
            type: string
        - name: type
          in: query
          description: Tipo di voto da recuperare
          required: false
          schema:
            type: string
      description: >
        Recupero del numero di tutti i voti presenti nel sistema di una data idea il cui Id è passato
        nei params. In base al tipo di voto passato nei params, il sistema restituisce il numero di voti positivi
        o negativi o totali.
      responses:
        200:
          description: voti recuperati
        401:
          description: Utente non autorizzato

    post:
      tags:
        - Vote
      summary: Creazione di un nuovo voto
      parameters:
        - name: ideaId
          in: path
          description: Id dell`idea a cui aggiungere un voto
          required: true
          schema:
            type: string
      description: Creazione di un nuovo voto
      requestBody:
        description: tipologia di voto da creare
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - type
              properties:
                type:
                  type: number
                  example: 1
      responses:
        200:
          description: Voto creato
        401:
          description: Voto non creato

  /votes/{voteId}:
    delete:
      tags:
        - Vote
      summary: Eliminazione di un proprio voto
      parameters:
        - name: voteId
          in: path
          description: Id del voto da eliminare
          required: true
          schema:
            type: string
      description: Eliminazione di un singolo voto
      responses:
        200:
          description: Voto eliminato
        401:
          description: Voto non eliminato

    put:
      tags:
        - Vote
      summary: Modifica di un proprio voto
      parameters:
        - name: voteId
          in: path
          description: Id del voto da modificare
          required: true
          schema:
            type: string
      description: Modifica di un voto
      requestBody:
        description: valore del voto aggiornato
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - type
              properties:
                type:
                  type: number
                  example: 1
      responses:
        200:
          description: Voto modificato
        401:
          description: Voto non modificato

  # Doc. dei path /comments
  /ideas/{ideaId}/comments:
    post:
      tags:
        - Comment
      summary: Creazione di un nuovo commento
      description: Creazione di un nuovo commento
      requestBody:
        description: Contenuto del commento da creare
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - content
              properties:
                comment:
                  type: string
                  example: Contenuto del commento
      responses:
        200:
          description: commento creato
        401:
          description: commento non creato

  /comments/{commentId}:
    delete:
      tags:
        - Comment
      summary: Eliminazione di un proprio commento
      parameters:
        - name: commentId
          in: path
          description: Id del commento da eliminare
          required: true
          schema:
            type: string
      description: Eliminazione di un singolo commento
      responses:
        200:
          description: Commento eliminato
        401:
          description: Commento non eliminato

    put:
      tags:
        - Comment
      summary: Modifica di un proprio commento
      parameters:
        - name: commentId
          in: path
          description: Id del commento da modificare
          required: true
          schema:
            type: string
      description: Modifica di un commento
      requestBody:
        description: contenuto del commento aggiornato
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - content
              properties:
                comment:
                  type: string
                  example: Contenuto del commento
      responses:
        200:
          description: Commento modificato
        401:
          description: Commento non modificato
